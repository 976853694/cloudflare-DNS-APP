# 更新日志

## 2025-12-31

### APP 端图形验证码支持
- 在 `utils/request.js` 中添加 `X-Client-Type: app` 请求头标识
- 在 `api/auth.js` 中添加 `getCaptchaConfig` 和 `checkRegisterStatus` 接口
- APP 端自动使用图形验证码，H5 端使用 Turnstile
- 登录、注册、忘记密码、修改密码、修改邮箱页面均已支持图形验证码
- 修复 `pages/admin/email-templates.vue` 模板变量显示的语法错误

### 用户管理增强
- 用户详情弹窗新增 OAuth 绑定信息显示
- 支持管理员解绑用户的 GitHub/Google/NodeLoc 账号
- 在 `api/admin.js` 中添加 OAuth 解绑接口

### 数据管理页面
- 新增 `pages/admin/data-manage.vue` 数据管理页面
- 支持导出用户数据为 CSV 格式
- 支持导出二级域名数据为 CSV 格式
- 支持导出卡密数据为 CSV 格式
- 支持从 CSV 批量导入用户
- 支持从 CSV 批量导入卡密
- 提供 CSV 格式说明
- 在管理后台首页添加数据管理入口

### 用户安全设置页面
- 新增 `pages/settings/security.vue` 安全设置页面
- 支持双因素认证 (2FA) 设置、启用、禁用
- 支持备用码生成和管理
- 支持 API 密钥生成、查看、重置
- 支持 API 启用/禁用切换
- 支持 API IP 白名单管理
- 支持登录 IP 限制设置
- 支持查看登录历史记录
- 在 `api/security.js` 中添加 API 密钥管理相关接口
- 在设置页面添加安全设置入口

### 管理端邮件模板管理
- 新增 `pages/admin/email-templates.vue` 邮件模板管理页面
- 支持查看所有邮件模板列表
- 支持编辑邮件模板主题和内容
- 支持模板变量提示
- 支持邮件预览功能
- 支持发送测试邮件
- 支持重置模板为默认
- 在 `api/admin.js` 中添加邮件模板管理相关接口

### 管理端 IP 黑名单管理
- 新增 `pages/admin/ip-blacklist.vue` IP 黑名单管理页面
- 支持查看黑名单列表
- 支持搜索 IP 地址
- 支持添加 IP 到黑名单（可设置封禁原因和时长）
- 支持解除 IP 封禁
- 支持分页浏览

### 管理端系统设置完善
- 重构 `pages/admin/settings.vue` 系统设置页面
- 新增注册设置：开放注册开关、新用户默认域名配额、邮箱后缀限制
- 新增验证码设置：Turnstile 开关及配置、各场景验证码开关
- 新增 OAuth 登录配置：GitHub、Google、NodeLoc
- 新增网站统计代码配置
- 优化页面 UI 布局，分组更清晰

### 管理后台入口更新
- 在管理后台首页添加邮件模板管理入口
- 在管理后台首页添加 IP 黑名单管理入口
